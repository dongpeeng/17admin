(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71a4f18a"],{"480d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"banner-details"}},[a("el-form",{ref:"form",attrs:{model:t.data,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转链接"}},[a("el-input",{model:{value:t.data.turnUrl,callback:function(e){t.$set(t.data,"turnUrl",e)},expression:"data.turnUrl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:t.uploadUrl,"on-success":t.upImgSuccess,multiple:""}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1),t._v(" "),t.data.url?a("img",{staticClass:"banner-img",attrs:{src:t.baseUrl+t.data.url,alt:""}}):t._e()],1),t._v(" "),a("el-form-item",[-1==t.id?a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")]):a("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("更新")]),t._v(" "),a("el-button",{on:{click:t.goBack}},[t._v("取消")])],1)],1)],1)},n=[],s=a("709b"),i={data:function(){return{id:1*this.$route.params.id,uploadUrl:BASE_API+"path/addImg",baseUrl:CDN_URL,data:{title:"",turnUrl:"",url:""}}},methods:{upImgSuccess:function(t){101==t.errno?this.data.url=t.data.relativePath:this.$message.error(t.errmsg)},getDetails:function(){var t=this;Object(s["c"])({id:this.id}).then(function(e){console.log(e),t.listLoading=!1,1*e.errno===101?t.data=e.data:t.$message.error(e.errmsg)})},update:function(){var t=this;Object(s["e"])({id:this.id,title:this.data.title,turnUrl:this.data.turnUrl,url:this.data.url,status:this.data.status}).then(function(e){console.log(e),t.listLoading=!1,1*e.errno===101?(t.$message({message:"更新成功",type:"success"}),setTimeout(function(){t.$router.push("/banner")},1500)):t.$message.error(e.errmsg)})},onSubmit:function(){var t=this;this.data.url="qingmeng/20190912095340412.jpg",Object(s["a"])({title:this.data.title,turnUrl:this.data.turnUrl,url:this.data.url,status:2}).then(function(e){console.log(e),t.listLoading=!1,1*e.errno===101?(t.$message({message:"添加成功",type:"success"}),setTimeout(function(){t.$router.push("/banner")},1500)):t.$message.error(e.errmsg)})},goBack:function(){this.$router.push("/banner")}},created:function(){this.id&&-1!==this.id&&this.getDetails()}},u=i,l=(a("5392"),a("6691")),o=Object(l["a"])(u,r,n,!1,null,"059c8b97",null);e["default"]=o.exports},5392:function(t,e,a){"use strict";var r=a("9e09"),n=a.n(r);n.a},"709b":function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return s}),a.d(e,"d",function(){return i}),a.d(e,"c",function(){return u}),a.d(e,"e",function(){return l});var r=a("b775");function n(t){return Object(r["a"])({url:BASE_API+"banner/add",method:"post",params:t})}function s(t){return Object(r["a"])({url:BASE_API+"banner/delete",method:"post",params:t})}function i(t){return Object(r["a"])({url:BASE_API+"banner/getBannerList",method:"get",params:t})}function u(t){return Object(r["a"])({url:BASE_API+"banner/getBannerById",method:"get",params:t})}function l(t){return Object(r["a"])({url:BASE_API+"banner/update",method:"post",params:t})}},"9e09":function(t,e,a){}}]);